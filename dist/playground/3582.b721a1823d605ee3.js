"use strict";(self.webpackChunkplayground=self.webpackChunkplayground||[]).push([[3582],{3582:(M,m,e)=>{e.d(m,{S:()=>N});var h=e(3668),d=e(6019),u=e(4301),i=e(9133),f=e(6512),a=e(5082),y=e(3973),n=e(9761),p=e(2625),s=e(6630),g=e(3004),O=e(3785),_=e(2369),o=e(9023),E=e(6807),t=e(7402),c=e(1004),l=e(7406),r=e(7431),T=e(8299),P=e(5170);function D(R,v){const k=[];return R.strategies.forEach(([U,I])=>{const w=v.get(U);w.setOptions(I),k.push(w)}),k}function A(R){const v=[];return R.forEach(k=>{v.push(k.getOption("token.class"))}),v}function C(R){return(0,P.ZB)(T.GI,R)}function S(R){return!0}let N=(()=>{class R{static forRoot(k){return{ngModule:R,providers:[{provide:T.sR,useValue:k},{provide:T.h,useFactory:C,deps:[T.sR]},{provide:T.ao,useFactory:D,deps:[T.h,h.zs3]},{provide:T.oB,useFactory:A,deps:[T.ao]},{provide:t.Z,useValue:_.xC},{provide:T.g5,useValue:"Authorization"},{provide:T.nN,useValue:S},{provide:o.i,useClass:o.e},t.r,O._,E.L,c.r,r.O,l.F]}}}return R.\u0275fac=function(k){return new(k||R)},R.\u0275mod=h.oAB({type:R}),R.\u0275inj=h.cJS({imports:[[d.ez,f.B,a.z,y.M,n.P,p.n,s.T,u.Bz,i.u5,g.K]]}),R})()},8299:(M,m,e)=>{e.d(m,{GI:()=>u,h:()=>i,sR:()=>f,ao:()=>a,oB:()=>y,g5:()=>n,nN:()=>p});var h=e(3668);const d=[],u={strategies:[],forms:{login:{redirectDelay:500,strategy:"email",rememberMe:!0,showMessages:{success:!0,error:!0},socialLinks:d},register:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},terms:!0,socialLinks:d},requestPassword:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},socialLinks:d},resetPassword:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},socialLinks:d},logout:{redirectDelay:500,strategy:"email"},validation:{password:{required:!0,minLength:4,maxLength:50},email:{required:!0},fullName:{required:!1,minLength:4,maxLength:50}}}},i=new h.OlP("Nebular Auth Options"),f=new h.OlP("Nebular User Auth Options"),a=new h.OlP("Nebular Auth Strategies"),y=new h.OlP("Nebular Auth Tokens"),n=new h.OlP("Nebular Simple Interceptor Header"),p=new h.OlP("Nebular Interceptor Filter")},5170:(M,m,e)=>{e.d(m,{ZB:()=>h,hB:()=>f,XE:()=>a});const h=function(...p){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];const s=arguments[0],g=Array.prototype.slice.call(arguments,1);let O,_;return g.forEach(function(o){"object"!=typeof o||Array.isArray(o)||Object.keys(o).forEach(function(E){if(_=s[E],O=o[E],O!==s)return"object"!=typeof O||null===O?void(s[E]=O):Array.isArray(O)?void(s[E]=i(O)):d(O)?void(s[E]=u(O)):"object"!=typeof _||null===_||Array.isArray(_)?void(s[E]=h({},O)):void(s[E]=h(_,O))})}),s};function d(p){return p instanceof Date||p instanceof RegExp}function u(p){if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp)return new RegExp(p);throw new Error("cloneSpecificValue: Unexpected situation")}function i(p){const s=[];return p.forEach(function(g,O){s[O]="object"==typeof g&&null!==g?Array.isArray(g)?i(g):d(g)?u(g):h({},g):g}),s}function f(p={},s,g){const O=s.split(".");let _=h({},p||{});return O.forEach(o=>{_=_&&void 0!==_[o]?_[o]:void 0}),void 0===_?g:_}function a(p){let s=p.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw new Error("Illegal base64url string!")}return function(p){return decodeURIComponent(Array.prototype.map.call(function(p){let g="";if((p=String(p).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let _,o,O=0,E=0;o=p.charAt(E++);~o&&(_=O%4?64*_+o:o,O++%4)?g+=String.fromCharCode(255&_>>(-2*O&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return g}(p),s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join(""))}(s)}},6334:(M,m,e)=>{e.d(m,{g:()=>h});class h{constructor(u,i,f,a,y,n=null){this.success=u,this.response=i,this.redirect=f,this.errors=[],this.messages=[],this.errors=this.errors.concat([a]),a instanceof Array&&(this.errors=a),this.messages=this.messages.concat([y]),y instanceof Array&&(this.messages=y),this.token=n}getResponse(){return this.response}getToken(){return this.token}getRedirect(){return this.redirect}getErrors(){return this.errors.filter(u=>!!u)}getMessages(){return this.messages.filter(u=>!!u)}isSuccess(){return this.success}isFailure(){return!this.success}}},3785:(M,m,e)=>{e.d(m,{_:()=>y});var h=e(2411),d=e(8053),u=e(9204),i=e(8299),f=e(3668),a=e(6807);let y=(()=>{class n{constructor(s,g){this.tokenService=s,this.strategies=g}getToken(){return this.tokenService.get()}isAuthenticated(){return this.getToken().pipe((0,d.U)(s=>s.isValid()))}isAuthenticatedOrRefresh(){return this.getToken().pipe((0,u.w)(s=>s.getValue()&&!s.isValid()?this.refreshToken(s.getOwnerStrategyName(),s).pipe((0,u.w)(g=>g.isSuccess()?this.isAuthenticated():(0,h.of)(!1))):(0,h.of)(s.isValid())))}onTokenChange(){return this.tokenService.tokenChange()}onAuthenticationChange(){return this.onTokenChange().pipe((0,d.U)(s=>s.isValid()))}authenticate(s,g){return this.getStrategy(s).authenticate(g).pipe((0,u.w)(O=>this.processResultToken(O)))}register(s,g){return this.getStrategy(s).register(g).pipe((0,u.w)(O=>this.processResultToken(O)))}logout(s){return this.getStrategy(s).logout().pipe((0,u.w)(g=>(g.isSuccess()&&this.tokenService.clear().pipe((0,d.U)(()=>g)),(0,h.of)(g))))}requestPassword(s,g){return this.getStrategy(s).requestPassword(g)}resetPassword(s,g){return this.getStrategy(s).resetPassword(g)}refreshToken(s,g){return this.getStrategy(s).refreshToken(g).pipe((0,u.w)(O=>this.processResultToken(O)))}getStrategy(s){const g=this.strategies.find(O=>O.getName()===s);if(!g)throw new TypeError(`There is no Auth Strategy registered under '${s}' name`);return g}processResultToken(s){return s.isSuccess()&&s.getToken()?this.tokenService.set(s.getToken()).pipe((0,d.U)(g=>s)):(0,h.of)(s)}}return n.\u0275fac=function(s){return new(s||n)(f.LFG(a.L),f.LFG(i.ao))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})()},7402:(M,m,e)=>{e.d(m,{Z:()=>i,r:()=>f});var h=e(3668),d=e(2369),u=e(8299);const i=new h.OlP("Nebular Auth Options");let f=(()=>{class a{constructor(n,p){this.fallbackClass=n,this.tokenClasses=p}wrap(n){return JSON.stringify({name:n.getName(),ownerStrategyName:n.getOwnerStrategyName(),createdAt:n.getCreatedAt().getTime(),value:n.toString()})}unwrap(n){let p=this.fallbackClass,s="",g="",O=null;const _=this.parseTokenPack(n);return _&&(p=this.getClassByName(_.name)||this.fallbackClass,s=_.value,g=_.ownerStrategyName,O=new Date(Number(_.createdAt))),(0,d.P_)(p,s,g,O)}getClassByName(n){return this.tokenClasses.find(p=>p.NAME===n)}parseTokenPack(n){try{return JSON.parse(n)}catch(p){}return null}}return a.\u0275fac=function(n){return new(n||a)(h.LFG(i),h.LFG(u.oB))},a.\u0275prov=h.Yz7({token:a,factory:a.\u0275fac}),a})()},9023:(M,m,e)=>{e.d(m,{i:()=>u,e:()=>i});var h=e(3668),d=e(7402);class u{}let i=(()=>{class f extends u{constructor(y){super(),this.parceler=y,this.key="auth_app_token"}get(){const y=localStorage.getItem(this.key);return this.parceler.unwrap(y)}set(y){const n=this.parceler.wrap(y);localStorage.setItem(this.key,n)}clear(){localStorage.removeItem(this.key)}}return f.\u0275fac=function(y){return new(y||f)(h.LFG(d.r))},f.\u0275prov=h.Yz7({token:f,factory:f.\u0275fac}),f})()},6807:(M,m,e)=>{e.d(m,{L:()=>y});var h=e(4099),d=e(2411),u=e(8735),i=e(550),f=e(3668),a=e(9023);let y=(()=>{class n{constructor(s){this.tokenStorage=s,this.token$=new h.X(null),this.publishStoredToken()}tokenChange(){return this.token$.pipe((0,u.h)(s=>!!s),(0,i.B)())}set(s){return this.tokenStorage.set(s),this.publishStoredToken(),(0,d.of)(null)}get(){const s=this.tokenStorage.get();return(0,d.of)(s)}clear(){return this.tokenStorage.clear(),this.publishStoredToken(),(0,d.of)(null)}publishStoredToken(){this.token$.next(this.tokenStorage.get())}}return n.\u0275fac=function(s){return new(s||n)(f.LFG(a.i))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})()},2369:(M,m,e)=>{e.d(m,{ww:()=>i,P_:()=>y,xC:()=>p,OS:()=>s,FN:()=>O,Xq:()=>_});var h=e(5170);class u extends Error{constructor(E){super(E),Object.setPrototypeOf(this,new.target.prototype)}}class i extends Error{constructor(E){super(E),Object.setPrototypeOf(this,new.target.prototype)}}class f extends i{constructor(E){super(E),Object.setPrototypeOf(this,new.target.prototype)}}class a extends i{constructor(E){super(E),Object.setPrototypeOf(this,new.target.prototype)}}function y(o,E,t,c){return new o(E,t,c)}function n(o){if(0===o.length)throw new f("Cannot extract from an empty payload.");const E=o.split(".");if(3!==E.length)throw new a(`The payload ${o} is not valid JWT payload and must consist of three parts.`);let t;try{t=(0,h.XE)(E[1])}catch(c){throw new a(`The payload ${o} is not valid JWT payload and cannot be parsed.`)}if(!t)throw new a(`The payload ${o} is not valid JWT payload and cannot be decoded.`);return JSON.parse(t)}let p=(()=>{class o extends class{constructor(){this.payload=null}getName(){return this.constructor.NAME}getPayload(){return this.payload}}{constructor(t,c,l){super(),this.token=t,this.ownerStrategyName=c,this.createdAt=l;try{this.parsePayload()}catch(r){if(!(r instanceof u))throw r}this.createdAt=this.prepareCreatedAt(l)}parsePayload(){this.payload=null}prepareCreatedAt(t){return t||new Date}getCreatedAt(){return this.createdAt}getValue(){return this.token}getOwnerStrategyName(){return this.ownerStrategyName}isValid(){return!!this.getValue()}toString(){return this.token?this.token:""}}return o.NAME="nb:auth:simple:token",o})(),s=(()=>{class o extends p{prepareCreatedAt(t){const c=this.getPayload();return c&&c.iat?new Date(1e3*Number(c.iat)):super.prepareCreatedAt(t)}parsePayload(){if(!this.token)throw new u("Token not found. ");this.payload=n(this.token)}getTokenExpDate(){const t=this.getPayload();if(t&&!t.hasOwnProperty("exp"))return null;const c=new Date(0);return c.setUTCSeconds(t.exp),c}isValid(){return super.isValid()&&(!this.getTokenExpDate()||new Date<this.getTokenExpDate())}}return o.NAME="nb:auth:jwt:token",o})(),O=(()=>{class o extends p{constructor(t={},c,l){super((o=>{if("string"==typeof o)try{return JSON.parse(o)}catch(E){}return o})(t),c,l)}getValue(){return this.token.access_token}getRefreshToken(){return this.token.refresh_token}setRefreshToken(t){this.token.refresh_token=t}parsePayload(){if(!this.token)throw new u("Token not found.");if(!Object.keys(this.token).length)throw new f("Cannot extract payload from an empty token.");this.payload=this.token}getType(){return this.token.token_type}isValid(){return super.isValid()&&(!this.getTokenExpDate()||new Date<this.getTokenExpDate())}getTokenExpDate(){return this.token.hasOwnProperty("expires_in")?new Date(this.createdAt.getTime()+1e3*Number(this.token.expires_in)):null}toString(){return JSON.stringify(this.token)}}return o.NAME="nb:auth:oauth2:token",o})(),_=(()=>{class o extends O{parsePayload(){super.parsePayload(),this.parseAccessTokenPayload()}parseAccessTokenPayload(){const t=this.getValue();if(!t)throw new u("access_token key not found.");this.accessTokenPayload=n(t)}getAccessTokenPayload(){return this.accessTokenPayload}prepareCreatedAt(t){const c=this.accessTokenPayload;return c&&c.iat?new Date(1e3*Number(c.iat)):super.prepareCreatedAt(t)}isValid(){return this.accessTokenPayload&&super.isValid()}getTokenExpDate(){if(this.accessTokenPayload&&this.accessTokenPayload.hasOwnProperty("exp")){const t=new Date(0);return t.setUTCSeconds(this.accessTokenPayload.exp),t}return super.getTokenExpDate()}}return o.NAME="nb:auth:oauth2:jwt:token",o})()},2337:(M,m,e)=>{e.d(m,{Y:()=>h});class h{}},8177:(M,m,e)=>{e.d(m,{D:()=>i});var h=e(4522),d=e(5170),u=e(2369);class i{setOptions(a){this.options=(0,d.ZB)({},this.defaultOptions,a)}getOption(a){return(0,d.hB)(this.options,a,null)}createToken(a,y){const n=(0,u.P_)(this.getOption("token.class"),a,this.getName());if(y&&!n.isValid())throw new u.ww("Token is empty or invalid.");return n}getName(){return this.getOption("name")}createFailResponse(a){return new h.Zn({body:{},status:401})}createSuccessResponse(a){return new h.Zn({body:{},status:200})}getActionEndpoint(a){const y=this.getOption(`${a}.endpoint`),n=this.getOption("baseEndpoint");return y?n+y:""}getHeaders(){var a;const y=null!==(a=this.getOption("headers"))&&void 0!==a?a:{};if(y instanceof h.WM)return y;let n=new h.WM;return Object.entries(y).forEach(([p,s])=>{n=n.append(p,s)}),n}}},1004:(M,m,e)=>{e.d(m,{r:()=>s});var h=e(2411),d=e(5250),u=e(8177),i=e(6334),f=e(2337),a=e(2369);const n=new class extends f.Y{constructor(){super(...arguments),this.token={class:a.xC},this.delay=1e3,this.alwaysFail=!1}};var p=e(3668);let s=(()=>{class g extends u.D{constructor(){super(...arguments),this.defaultOptions=n}static setup(_){return[g,_]}authenticate(_){return(0,h.of)(this.createDummyResult(_)).pipe((0,d.g)(this.getOption("delay")))}register(_){return(0,h.of)(this.createDummyResult(_)).pipe((0,d.g)(this.getOption("delay")))}requestPassword(_){return(0,h.of)(this.createDummyResult(_)).pipe((0,d.g)(this.getOption("delay")))}resetPassword(_){return(0,h.of)(this.createDummyResult(_)).pipe((0,d.g)(this.getOption("delay")))}logout(_){return(0,h.of)(this.createDummyResult(_)).pipe((0,d.g)(this.getOption("delay")))}refreshToken(_){return(0,h.of)(this.createDummyResult(_)).pipe((0,d.g)(this.getOption("delay")))}createDummyResult(_){if(this.getOption("alwaysFail"))return new i.g(!1,this.createFailResponse(_),null,["Something went wrong."]);try{const o=this.createToken("test token",!0);return new i.g(!0,this.createSuccessResponse(_),"/",[],["Successfully logged in."],o)}catch(o){return new i.g(!1,this.createFailResponse(_),null,[o.message])}}}return g.\u0275fac=function(){let O;return function(o){return(O||(O=p.n5z(g)))(o||g)}}(),g.\u0275prov=p.Yz7({token:g,factory:g.\u0275fac}),g})()},3203:(M,m,e)=>{e.d(m,{aW:()=>u,sY:()=>i,rW:()=>f,N2:()=>y});var h=e(2369),d=e(2337),u=(()=>{return(n=u||(u={})).CODE="code",n.TOKEN="token",u;var n})(),i=(()=>{return(n=i||(i={})).AUTHORIZATION_CODE="authorization_code",n.PASSWORD="password",n.REFRESH_TOKEN="refresh_token",i;var n})(),f=(()=>{return(n=f||(f={})).NONE="none",n.BASIC="basic",n.REQUEST_BODY="request-body",f;var n})();const y=new class extends d.Y{constructor(){super(...arguments),this.baseEndpoint="",this.clientId="",this.clientSecret="",this.clientAuthMethod=f.NONE,this.redirect={success:"/",failure:null},this.defaultErrors=["Something went wrong, please try again."],this.defaultMessages=["You have been successfully authenticated."],this.authorize={endpoint:"authorize",responseType:u.CODE,requireValidToken:!0},this.token={endpoint:"token",grantType:i.AUTHORIZATION_CODE,requireValidToken:!0,class:h.FN},this.refresh={endpoint:"token",grantType:i.REFRESH_TOKEN,requireValidToken:!0}}}},7406:(M,m,e)=>{e.d(m,{F:()=>_});var h=e(4522),d=e(2411),u=e(9204),i=e(8053),f=e(2047),a=e(3049),y=e(8177),n=e(2369),p=e(6334),s=e(3203),g=e(3668),O=e(4301);let _=(()=>{class o extends y.D{constructor(t,c,l){super(),this.http=t,this.route=c,this.window=l,this.redirectResultHandlers={[s.aW.CODE]:()=>(0,d.of)(this.route.snapshot.queryParams).pipe((0,u.w)(r=>r.code?this.requestToken(r.code):(0,d.of)(new p.g(!1,r,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[])))),[s.aW.TOKEN]:()=>{const T=this.getOption("authorize.requireValidToken");return(0,d.of)(this.route.snapshot.fragment).pipe((0,i.U)(P=>this.parseHashAsQueryParams(P)),(0,i.U)(P=>P.error?new p.g(!1,P,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[]):new p.g(!0,P,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(P,T))),(0,f.K)(P=>{const D=[];return D.push(P instanceof n.ww?P.message:"Something went wrong."),(0,d.of)(new p.g(!1,P,this.getOption("redirect.failure"),D))}))}},this.redirectResults={[s.aW.CODE]:()=>(0,d.of)(this.route.snapshot.queryParams).pipe((0,i.U)(r=>!(!r||!r.code&&!r.error))),[s.aW.TOKEN]:()=>(0,d.of)(this.route.snapshot.fragment).pipe((0,i.U)(r=>this.parseHashAsQueryParams(r)),(0,i.U)(r=>!(!r||!r.access_token&&!r.error)))},this.defaultOptions=s.N2}static setup(t){return[o,t]}get responseType(){return this.getOption("authorize.responseType")}get clientAuthMethod(){return this.getOption("clientAuthMethod")}authenticate(t){return this.getOption("token.grantType")===s.sY.PASSWORD?this.passwordToken(t.email,t.password):this.isRedirectResult().pipe((0,u.w)(c=>c?this.getAuthorizationResult():(this.authorizeRedirect(),(0,d.of)(new p.g(!0)))))}getAuthorizationResult(){const t=this.redirectResultHandlers[this.responseType];if(t)return t.call(this);throw new Error(`'${this.responseType}' responseType is not supported,\n                      only 'token' and 'code' are supported now`)}refreshToken(t){const c="refresh",l=this.getActionEndpoint(c),r=this.getOption(`${c}.requireValidToken`);return this.http.post(l,this.buildRefreshRequestData(t),{headers:this.getHeaders()}).pipe((0,i.U)(T=>new p.g(!0,T,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createRefreshedToken(T,t,r))),(0,f.K)(T=>this.handleResponseError(T)))}passwordToken(t,c){const l="token",r=this.getActionEndpoint(l),T=this.getOption(`${l}.requireValidToken`);return this.http.post(r,this.buildPasswordRequestData(t,c),{headers:this.getHeaders()}).pipe((0,i.U)(P=>new p.g(!0,P,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(P,T))),(0,f.K)(P=>this.handleResponseError(P)))}authorizeRedirect(){this.window.location.href=this.buildRedirectUrl()}isRedirectResult(){return this.redirectResults[this.responseType].call(this)}requestToken(t){const c="token",l=this.getActionEndpoint(c),r=this.getOption(`${c}.requireValidToken`);return this.http.post(l,this.buildCodeRequestData(t),{headers:this.getHeaders()}).pipe((0,i.U)(T=>new p.g(!0,T,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(T,r))),(0,f.K)(T=>this.handleResponseError(T)))}buildCodeRequestData(t){const c={grant_type:this.getOption("token.grantType"),code:t,redirect_uri:this.getOption("token.redirectUri"),client_id:this.getOption("clientId")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(c)))}buildRefreshRequestData(t){const c={grant_type:this.getOption("refresh.grantType"),refresh_token:t.getRefreshToken(),scope:this.getOption("refresh.scope"),client_id:this.getOption("clientId")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(c)))}buildPasswordRequestData(t,c){const l={grant_type:this.getOption("token.grantType"),username:t,password:c,scope:this.getOption("token.scope")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(l)))}buildAuthHeader(){if(this.clientAuthMethod===s.rW.BASIC){if(this.getOption("clientId")&&this.getOption("clientSecret"))return new h.WM({Authorization:"Basic "+btoa(this.getOption("clientId")+":"+this.getOption("clientSecret"))});throw Error("For basic client authentication method, please provide both clientId & clientSecret.")}}getHeaders(){let t=super.getHeaders();t=t.append("Content-Type","application/x-www-form-urlencoded");const c=this.buildAuthHeader();if(void 0===c)return t;for(const l of c.keys())for(const r of c.getAll(l))t=t.append(l,r);return t}cleanParams(t){return Object.entries(t).forEach(([c,l])=>!l&&delete t[c]),t}addCredentialsToParams(t){if(this.clientAuthMethod===s.rW.REQUEST_BODY){if(this.getOption("clientId")&&this.getOption("clientSecret"))return Object.assign(Object.assign({},t),{client_id:this.getOption("clientId"),client_secret:this.getOption("clientSecret")});throw Error("For request body client authentication method, please provide both clientId & clientSecret.")}return t}handleResponseError(t){let c=[];return t instanceof h.UA?t.error.error_description?c.push(t.error.error_description):c=this.getOption("defaultErrors"):c.push(t instanceof n.ww?t.message:"Something went wrong."),(0,d.of)(new p.g(!1,t,this.getOption("redirect.failure"),c,[]))}buildRedirectUrl(){const t=Object.assign({response_type:this.getOption("authorize.responseType"),client_id:this.getOption("clientId"),redirect_uri:this.getOption("authorize.redirectUri"),scope:this.getOption("authorize.scope"),state:this.getOption("authorize.state")},this.getOption("authorize.params"));return`${this.getActionEndpoint("authorize")}?${this.urlEncodeParameters(this.cleanParams(t))}`}parseHashAsQueryParams(t){return t?t.split("&").reduce((c,l)=>{const r=l.split("=");return c[r[0]]=decodeURIComponent(r[1]),c},{}):{}}urlEncodeParameters(t){return Object.keys(t).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(t[c])}`).join("&")}createRefreshedToken(t,c,l){const r=this.createToken(t,l);return!r.getRefreshToken()&&c.getRefreshToken()&&r.setRefreshToken(c.getRefreshToken()),r}register(t){throw new Error("`register` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}requestPassword(t){throw new Error("`requestPassword` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}resetPassword(t={}){throw new Error("`resetPassword` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}logout(){return(0,d.of)(new p.g(!0))}}return o.\u0275fac=function(t){return new(t||o)(g.LFG(h.eN),g.LFG(O.gz),g.LFG(a.Q3))},o.\u0275prov=g.Yz7({token:o,factory:o.\u0275fac}),o})()},7431:(M,m,e)=>{e.d(m,{O:()=>E});var h=e(4522),d=e(2411),u=e(8053),i=e(2047),f=e(9204),a=e(6334),y=e(8177),n=e(2369),p=e(2337),s=e(5170);const O=new class extends p.Y{constructor(){super(...arguments),this.baseEndpoint="/api/auth/",this.login={alwaysFail:!1,endpoint:"login",method:"post",requireValidToken:!0,redirect:{success:"/",failure:null},defaultErrors:["Login/Email combination is not correct, please try again."],defaultMessages:["You have been successfully logged in."]},this.register={alwaysFail:!1,endpoint:"register",method:"post",requireValidToken:!0,redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["You have been successfully registered."]},this.requestPass={endpoint:"request-pass",method:"post",redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["Reset password instructions have been sent to your email."]},this.resetPass={endpoint:"reset-pass",method:"put",redirect:{success:"/",failure:null},resetPasswordTokenKey:"reset_password_token",defaultErrors:["Something went wrong, please try again."],defaultMessages:["Your password has been successfully changed."]},this.logout={alwaysFail:!1,endpoint:"logout",method:"delete",redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["You have been successfully logged out."]},this.refreshToken={endpoint:"refresh-token",method:"post",requireValidToken:!0,redirect:{success:null,failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["Your token has been successfully refreshed."]},this.token={class:n.xC,key:"data.token",getter:(c,l,r)=>(0,s.hB)(l.body,r.token.key)},this.errors={key:"data.errors",getter:(c,l,r)=>(0,s.hB)(l.error,r.errors.key,r[c].defaultErrors)},this.messages={key:"data.messages",getter:(c,l,r)=>(0,s.hB)(l.body,r.messages.key,r[c].defaultMessages)}}};var _=e(3668),o=e(4301);let E=(()=>{class t extends y.D{constructor(l,r){super(),this.http=l,this.route=r,this.defaultOptions=O}static setup(l){return[t,l]}authenticate(l){const r="login",T=this.getOption(`${r}.method`),P=this.getActionEndpoint(r),D=this.getOption(`${r}.requireValidToken`);return this.http.request(T,P,{body:l,observe:"response",headers:this.getHeaders()}).pipe((0,u.U)(A=>{if(this.getOption(`${r}.alwaysFail`))throw this.createFailResponse(l);return A}),(0,u.U)(A=>new a.g(!0,A,this.getOption(`${r}.redirect.success`),[],this.getOption("messages.getter")(r,A,this.options),this.createToken(this.getOption("token.getter")(r,A,this.options),D))),(0,i.K)(A=>this.handleResponseError(A,r)))}register(l){const r="register",T=this.getOption(`${r}.method`),P=this.getActionEndpoint(r),D=this.getOption(`${r}.requireValidToken`);return this.http.request(T,P,{body:l,observe:"response",headers:this.getHeaders()}).pipe((0,u.U)(A=>{if(this.getOption(`${r}.alwaysFail`))throw this.createFailResponse(l);return A}),(0,u.U)(A=>new a.g(!0,A,this.getOption(`${r}.redirect.success`),[],this.getOption("messages.getter")(r,A,this.options),this.createToken(this.getOption("token.getter")("login",A,this.options),D))),(0,i.K)(A=>this.handleResponseError(A,r)))}requestPassword(l){const r="requestPass",T=this.getOption(`${r}.method`),P=this.getActionEndpoint(r);return this.http.request(T,P,{body:l,observe:"response",headers:this.getHeaders()}).pipe((0,u.U)(D=>{if(this.getOption(`${r}.alwaysFail`))throw this.createFailResponse();return D}),(0,u.U)(D=>new a.g(!0,D,this.getOption(`${r}.redirect.success`),[],this.getOption("messages.getter")(r,D,this.options))),(0,i.K)(D=>this.handleResponseError(D,r)))}resetPassword(l={}){const r="resetPass",T=this.getOption(`${r}.method`),P=this.getActionEndpoint(r),D=this.getOption(`${r}.resetPasswordTokenKey`);return l[D]=this.route.snapshot.queryParams[D],this.http.request(T,P,{body:l,observe:"response",headers:this.getHeaders()}).pipe((0,u.U)(A=>{if(this.getOption(`${r}.alwaysFail`))throw this.createFailResponse();return A}),(0,u.U)(A=>new a.g(!0,A,this.getOption(`${r}.redirect.success`),[],this.getOption("messages.getter")(r,A,this.options))),(0,i.K)(A=>this.handleResponseError(A,r)))}logout(){const l="logout",r=this.getOption(`${l}.method`),T=this.getActionEndpoint(l);return(0,d.of)({}).pipe((0,f.w)(P=>T?this.http.request(r,T,{observe:"response",headers:this.getHeaders()}):(0,d.of)(P)),(0,u.U)(P=>{if(this.getOption(`${l}.alwaysFail`))throw this.createFailResponse();return P}),(0,u.U)(P=>new a.g(!0,P,this.getOption(`${l}.redirect.success`),[],this.getOption("messages.getter")(l,P,this.options))),(0,i.K)(P=>this.handleResponseError(P,l)))}refreshToken(l){const r="refreshToken",T=this.getOption(`${r}.method`),P=this.getActionEndpoint(r),D=this.getOption(`${r}.requireValidToken`);return this.http.request(T,P,{body:l,observe:"response",headers:this.getHeaders()}).pipe((0,u.U)(A=>{if(this.getOption(`${r}.alwaysFail`))throw this.createFailResponse(l);return A}),(0,u.U)(A=>new a.g(!0,A,this.getOption(`${r}.redirect.success`),[],this.getOption("messages.getter")(r,A,this.options),this.createToken(this.getOption("token.getter")(r,A,this.options),D))),(0,i.K)(A=>this.handleResponseError(A,r)))}handleResponseError(l,r){let T=[];return l instanceof h.UA?T=this.getOption("errors.getter")(r,l,this.options):T.push(l instanceof n.ww?l.message:"Something went wrong."),(0,d.of)(new a.g(!1,l,this.getOption(`${r}.redirect.failure`),T))}}return t.\u0275fac=function(l){return new(l||t)(_.LFG(h.eN),_.LFG(o.gz))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac}),t})()},9761:(M,m,e)=>{e.d(m,{P:()=>u});var h=e(5861),d=e(3668);let u=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[h.P]]}),i})()},3973:(M,m,e)=>{e.d(m,{M:()=>i});var h=e(5861),d=e(3004),u=e(3668);let i=(()=>{class f{}return f.\u0275fac=function(y){return new(y||f)},f.\u0275mod=u.oAB({type:f}),f.\u0275inj=u.cJS({imports:[[h.P,d.K]]}),f})()},5964:(M,m,e)=>{e.d(m,{d:()=>d,G:()=>u});var h=e(3668);let d=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=h.Yz7({token:i,factory:i.\u0275fac}),i})(),u=(()=>{class i{constructor(){this.supportsPrefix=!0,this.supportsSuffix=!0}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=h.Yz7({token:i,factory:i.\u0275fac}),i})()},3191:(M,m,e)=>{e.d(m,{h:()=>g});var h=e(3405),d=e(4099),u=e(8053),i=e(6658),f=e(8805),a=e(8580),y=e(5964),n=e(3668),p=e(8878),s=e(163);let g=(()=>{class O{constructor(o,E,t,c,l){this.elementRef=o,this.focusMonitor=E,this.renderer=t,this.zone=c,this.statusService=l,this.destroy$=new h.xQ,this.fieldSize="medium",this.status="basic",this.shape="rectangle",this._fullWidth=!1,this.status$=new d.X(this.status),this.size$=new d.X(this.fieldSize),this.focused$=new d.X(!1),this.disabled$=new d.X(!1),this.fullWidth$=new d.X(this.fullWidth)}get fullWidth(){return this._fullWidth}set fullWidth(o){this._fullWidth=(0,a.e)(o)}get additionalClasses(){return this.statusService.isCustomStatus(this.status)?[this.statusService.getStatusClass(this.status)]:[]}ngDoCheck(){const o=this.elementRef.nativeElement.disabled;o!==this.disabled$.value&&this.disabled$.next(o)}ngOnChanges({status:o,fieldSize:E,fullWidth:t}){o&&this.status$.next(this.status),E&&this.size$.next(this.fieldSize),t&&this.fullWidth$.next(this.fullWidth)}ngOnInit(){this.focusMonitor.monitor(this.elementRef).pipe((0,u.U)(o=>!!o),(0,i.x)(()=>this.focusMonitor.stopMonitoring(this.elementRef)),(0,f.R)(this.destroy$)).subscribe(this.focused$)}ngAfterViewInit(){this.zone.runOutsideAngular(()=>setTimeout(()=>{this.renderer.addClass(this.elementRef.nativeElement,"nb-transition")}))}ngOnDestroy(){this.destroy$.next()}get tiny(){return"tiny"===this.fieldSize}get small(){return"small"===this.fieldSize}get medium(){return"medium"===this.fieldSize}get large(){return"large"===this.fieldSize}get giant(){return"giant"===this.fieldSize}get primary(){return"primary"===this.status}get info(){return"info"===this.status}get success(){return"success"===this.status}get warning(){return"warning"===this.status}get danger(){return"danger"===this.status}get basic(){return"basic"===this.status}get control(){return"control"===this.status}get rectangle(){return"rectangle"===this.shape}get semiRound(){return"semi-round"===this.shape}get round(){return"round"===this.shape}}return O.\u0275fac=function(o){return new(o||O)(n.Y36(n.SBq),n.Y36(p.z),n.Y36(n.Qsj),n.Y36(n.R0b),n.Y36(s.Y))},O.\u0275dir=n.lG2({type:O,selectors:[["input","nbInput",""],["textarea","nbInput",""]],hostVars:34,hostBindings:function(o,E){2&o&&(n.Tol(E.additionalClasses),n.ekj("input-full-width",E.fullWidth)("size-tiny",E.tiny)("size-small",E.small)("size-medium",E.medium)("size-large",E.large)("size-giant",E.giant)("status-primary",E.primary)("status-info",E.info)("status-success",E.success)("status-warning",E.warning)("status-danger",E.danger)("status-basic",E.basic)("status-control",E.control)("shape-rectangle",E.rectangle)("shape-semi-round",E.semiRound)("shape-round",E.round))},inputs:{fieldSize:"fieldSize",status:"status",shape:"shape",fullWidth:"fullWidth"},features:[n._Bn([{provide:y.d,useExisting:O}]),n.TTD]}),O})()},2625:(M,m,e)=>{e.d(m,{n:()=>f});var h=e(5861),u=(e(3191),e(3668));let f=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=u.oAB({type:a}),a.\u0275inj=u.cJS({imports:[[h.P]]}),a})()}}]);